# # tests/test_facebook_auth.py
# async def test_facebook_flow():
#     # Mock the OAuth callback
#     test_code = "test_auth_code"
#     agent_id = "test_agent_123"
    
#     result = await token_service.exchange_code_for_token(test_code, agent_id)
#     assert result['status'] == 'success'
#     assert 'expires_at' in result